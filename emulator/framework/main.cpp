// *******************************************************************************************************************************
// *******************************************************************************************************************************
//
//		Name:		main.c
//		Purpose:	Main program
//		Created:	22nd February 2022
//		Author:		Paul Robson (paul@robsons.org.uk)
//
// *******************************************************************************************************************************
// *******************************************************************************************************************************

#include <includes.h>
#include <buildnumber.h>

int getScale(int argc, char* argv[]) {
	for (int i = 1; i < argc; ++ i) {
		if (strstr(argv[i], "-scale=") != 0) {
			return std::max(atoi(&argv[i][7]), 1);
		}
	}
	return 1;
}

int main(int argc,char *argv[]) {
	char title[64];
	sprintf(title,"%s (Build %d : %s)",WIN_TITLE,BUILD_COUNT,BUILD_TIME);
	DEBUG_RESET();
	int runNow = DEBUG_ARGUMENTS(argc,argv);

	int scale = getScale(argc, argv);
	GFXOpenWindow(title,WIN_WIDTH * scale,WIN_HEIGHT * scale,WIN_BACKCOLOUR);
	GFXStart(runNow,scale);
	MEMEndRun();
	GFXCloseWindow();
	return(0);
}

// *******************************************************************************************************************************
// *******************************************************************************************************************************
//
//		Changes made
//	
//		Date 			Changes
//		---- 			-------
//
// *******************************************************************************************************************************
// *******************************************************************************************************************************

